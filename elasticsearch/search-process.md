# 엘라스틱 서치 검색 과정
1. Query Phase
쿼리 수행 명령을 받은 노드는 모든 샤드에게 쿼리를 전달하여 1차적으로 모든 샤드에서 검색을 실행한다.  
각 샤드들은 요청된 크기 만큼의 검색결과 큐를 노드로 리턴한다.  
리턴된 결과는 루씬 Doc id와 랭킹 점수만을 갖고 있다.

2. Fetch Phase
노드는 리턴된 결과들의 랭킹점수를 기반으로 정렬 한 뒤 유효한 샤드들에게 최종 결과를 다시 요청한다.  
각 샤드는 전체 문서내용(_source) 등의 정보가 리턴되어 클라이언트로 전달된다.  

검색은 항상 샤드 레벨로 이루어지기 때문에 찾는 데이터를 갖고 있지 않은 노드에서 검색을 요청하더라도 다른 노드의 샤드들 까지 검색해서 데이터를 찾는다.

### 참고  
- https://www.elastic.co/kr/webinars/getting-started-elasticsearch

